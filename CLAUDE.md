# CLAUDE.md - Development Rules

## Subagent Best Practices

### 並列エージェント活用ルール

開発時は以下のサブエージェントを積極的に並列活用すること：

1. **Explore Agent** - コードベース調査・構造理解
   - 新機能実装前のコードベース調査
   - 依存関係の把握
   - 既存パターンの確認

2. **Plan Agent** - 実装計画策定
   - アーキテクチャ設計
   - 実装ステップの洗い出し
   - クリティカルファイルの特定

3. **General-purpose Agent** - 複雑なマルチステップタスク
   - キーワード・ファイル検索
   - 複数箇所にまたがる調査

### 並列実行のガイドライン

- 独立したタスクは**必ず並列**で実行
- 依存関係のあるタスクのみ順次実行
- 単一メッセージで複数のTaskツールを呼び出す

```
例: コードベース調査と依存関係確認を同時に実行
- Task(Explore): "認証システムの実装を調査"
- Task(Explore): "API構造を調査"
```

---

## Definition of Done (DOD)

### フェーズ終了時の必須チェック

各開発フェーズ完了時に以下を**必ず**実行：

#### 1. コードレビュー
- [ ] 型エラーがないこと (`npm run typecheck`)
- [ ] Lintエラーがないこと (`npm run lint`)
- [ ] テストが通ること (`npm run test`)
- [ ] セキュリティ脆弱性がないこと

#### 2. プロダクションビルド
- [ ] ビルドが成功すること (`npm run build`)
- [ ] ビルド成果物に問題がないこと

### フェーズの定義

| フェーズ | 完了条件 |
|---------|---------|
| 設計 | Plan Agentによる実装計画承認 |
| 実装 | 機能実装完了 + DODチェック |
| テスト | テストコード作成 + 全テストパス |
| 統合 | ビルド成功 + 動作確認 |

---

## 開発フロー

```
1. [Explore Agent] コードベース調査（並列）
2. [Plan Agent] 実装計画策定
3. ユーザー承認
4. 実装（TodoWriteでタスク管理）
5. DODチェック（typecheck + lint + test + build）
6. 完了報告
```

---

## コマンドリファレンス

```bash
# 型チェック
npm run typecheck

# Lint
npm run lint

# テスト
npm run test

# プロダクションビルド
npm run build

# 開発サーバー
npm run dev
```
